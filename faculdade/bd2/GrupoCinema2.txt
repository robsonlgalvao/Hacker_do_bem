create database  GrupoCinema;
use GrupoCinema;
create table pessoa(
    	idPes INT NOT NULL AUTO_INCREMENT,
    nomePes VARCHAR(80) NOT NULL,
    nacionalidadePes VARCHAR(100),
    idadePes INT,
    PRIMARY KEY(idPes)
)ENGINE=INNODB;

create table cinema(
	idCinema INT NOT NULL AUTO_INCREMENT,
    nomeFantasia VARCHAR(80) NOT NULL,
    avenida VARCHAR(80),
    bairro VARCHAR(80),
    municipio VARCHAR(80),
    estado VARCHAR(80),
    capacidade VARCHAR(80),
    PRIMARY KEY(idCinema)
 )ENGINE=INNODB;
  
 create table genero(
	codGenero INT NOT NULL AUTO_INCREMENT,
    descricao VARCHAR(300),
    PRIMARY KEY (codGenero)
 )ENGINE=INNODB;
 
 create table sessao(
	codSessao INT NOT NULL AUTO_INCREMENT,
    horarioSessao TIME,
    dataSessao DATE,
    PRIMARY KEY(codSessao)
 )ENGINE=INNODB;
 
 create table diretor(
	idDiretor INT,
    PRIMARY KEY (idDiretor),
    FOREIGN KEY (idDiretor)REFERENCES Pessoa(idPes)
 )ENGINE=INNODB;
 
 create table ator(
	idAtor INT,
    PRIMARY KEY (idAtor),
    FOREIGN KEY (idAtor)REFERENCES Pessoa(idPes)
 )ENGINE=INNODB;
 
 create table filme(
	codFilme INT NOT NULL AUTO_INCREMENT,
    paisOrigem VARCHAR(50),
    impropriedade VARCHAR(80),
    duracao VARCHAR(80),
    tituloOriginal VARCHAR(50),
    Diretor_fk INT,
    codGenero_fk INT, 
    PRIMARY KEY (codFilme),
    FOREIGN KEY(Diretor_fk) REFERENCES diretor(idDiretor),
    FOREIGN KEY(codGenero_fk) REFERENCES genero(codGenero)
  )ENGINE=INNODB;
  
  create table filmeEstrangeiro(
	codFilme INT,
    tituloPortugues VARCHAR(50),
    PRIMARY KEY(codFilme),
    FOREIGN KEY(codFilme)REFERENCES filme(codFilme)
  );
  
  create table atua(
	idAtorAs INT,
    codFilmeAs INT,
    FOREIGN KEY(idAtorAs)REFERENCES ator(idAtor),
    FOREIGN KEY(codFilmeAs)REFERENCES filme(codFilme)
  );
  
  create table apresentacao(
	idCinema INT,
    codFilme INT,
    codSessao INT,
    qtdPublico INT,
    FOREIGN KEY(idCinema)REFERENCES cinema(idCinema),
    FOREIGN KEY(codFilme)REFERENCES filme(codFilme),
    FOREIGN KEY(codSessao)REFERENCES sessao(codSessao)
  );
  
  insert into pessoa value(0,"Robson","Brasileiro",35);
  insert into pessoa value(0,"Renan","Brasileiro",20);
  insert into pessoa value(0,"Gabriele","Brasileira",22);
  insert into pessoa value(0,"junin","Brasileiro",19);
  insert into cinema value(0,"Salão itaú","Avenida Amaral","Inhoaíba","Rio de Janeiro","Niterói","2000");
  insert into cinema value(0,"Caiçara","parmalat","rua paraguai","Rio das ostras","pandaré","300");
  insert into cinema value(0,"Espaço neves","poia","lost","tão tão distante","longe","1520");
  insert into cinema value(0,"largo da batalha","largo da batalha","neves","Rio de Janeiro","Niterói","8000");
  insert into genero value(0,"Não questione só aceite");
  insert into genero value(0,"Terror");
  insert into genero value(0,"Romance");
  insert into genero value(0,"Luta");
  insert into sessao value(0,"18:00:00","2024-05-13");
  insert into sessao value(0,"17:45:00","2024-12-23");
  insert into sessao value(0,"10:00:00","2025-02-03");
  insert into sessao value(0,"16:30:00","2024-09-05");
  insert into diretor value(1);
  insert into diretor value(2);
  insert into ator value(3);
  insert into ator value(4);
  insert into filme value(0,"Japão","16anos","1h45m","kungfusão",2,3);
  insert into filme value(0,"EUA","18anos","2h00m","Massacre",1,3);
  insert into filme value(0,"Russia","10anos","1h30m","O espião",2,2);
  insert into filme value(0,"Brasil","18anos","2h45m","Federal",1,1);
  insert into filmeestrangeiro value(1,"Agora já foi");
  insert into filmeestrangeiro value(2,"Eita");
  insert into filmeestrangeiro value(4,"Tieta");
  insert into filmeestrangeiro value(3,"Não é não");
  insert into atua value(3,4);
  insert into atua value(4,3);
  insert into atua value(4,2);
  insert into atua value(3,1);
  insert into apresentacao value(1,2,3,350);
  insert into apresentacao value(1,1,2,50);
  insert into apresentacao value(2,2,4,150);
  insert into apresentacao value(3,4,1,350);
 
 select * from pessoa;
 update pessoa set nomePes = 'Juninhu' where idPes = '4';
 select * from filme where paisOrigem = 'Japão';
 select * from sessao where dataSessao = '2024-12-23';
 select * from cinema where avenida = 'poia' and estado = 'longe';
 select * from pessoa  where idadePes = '20' or idadePes = '19';
 select * from cinema  where (avenida = 'poia' and estado = 'longe') or (bairro = 'neves' and estado = 'Niterói');
 select nomeFantasia, estado from cinema;
 select nomePes from pessoa;
 select distinct nomePes from pessoa;
 select idCinema, avenida, capacidade from cinema where idCinema = '1' or  capacidade = '8000';
 select nomeFantasia, capacidade from cinema order by capacidade;
 select nomeFantasia, capacidade from cinema order by capacidade desc;
 select nomeFantasia, capacidade from cinema order by capacidade asc;
 select nomePes, nacionalidadePes, idadePes from pessoa order by nomePes,  idadePes desc;
 select nomePes, nacionalidadePes, idadePes from pessoa order by nomePes,  idadePes asc;
 select nomePes, nacionalidadePes, idadePes from pessoa order by idadePes,  nomePes desc;
 select nomePes, nacionalidadePes, idadePes from pessoa order by idadePes,  nomePes asc;
 select codSessao,dataSessao, month(dataSessao) from sessao;
 select codSessao,dataSessao, year(dataSessao) from sessao;
 select codSessao,dataSessao, dayofmonth(dataSessao) from sessao;
 select codSessao, dataSessao from sessao where month(dataSessao) = 09;
 select codSessao, dataSessao from sessao where year(dataSessao) = 2024;
 select codSessao, dataSessao from sessao where dayofmonth(dataSessao) = 05;
 select codSessao, dataSessao from sessao where month(dataSessao) = month (date_add(curdate(),interval 1 month));
 select codSessao, dataSessao from sessao where month(dataSessao) = mod (month(curdate()), 12) + 1;
 select '2024-05-13' + interval 1 day;
 select '2018-10-32' + interval 1 day;
 show warnings;
 select 1 is null, 1 is not null;
 select 1 = null, 1<>null, 1< null, 1> null;
 select 0 is null, 0 is not null, '' is null, '' is not null;
 select * from pessoa where nomePes like 'R%';
 select * from pessoa where nomePes like '%le';
 select * from pessoa where nomePes like '%b%';
 select * from pessoa where nomePes like '_____';
 select * from pessoa where regexp_like(nomePes, '^g');
 select * from pessoa where regexp_like(nomePes, '^G'collate  utf8mb4_0900_as_cs);
 select * from pessoa where regexp_like(nomePes, 'on$');
 select * from pessoa where regexp_like(nomePes, 'n');
 select * from pessoa where regexp_like(nomePes, '^......$');
 select * from pessoa where regexp_like(nomePes, '^.{6}$');
 select count(*) from pessoa;
 select idadePes, count(*) from pessoa GROUP BY idadePes;
 select idadePes, nomePes, count(*) from pessoa GROUP BY idadePes, nomePes;
 select idadePes, nomePes, count(*) from pessoa where idadePes = '35' OR  nomePes = 'Juninhu' GROUP BY idadePes, nomePes;
 select idadePes, nomePes, count(*) from pessoa where idadePes IS NOT NULL  GROUP BY idadePes, nomePes;  
 select p1.paisOrigem, p1.tituloOriginal, p2.paisOrigem, p2.tituloOriginal,  p1.duracao FROM filme p1 INNER JOIN filme p2 ON p1.duracao = p2.duracao AND  p1.tituloOriginal = 'Kungfusão' AND p2.paisOrigem = 'Japão';